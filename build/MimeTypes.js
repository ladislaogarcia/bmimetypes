"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _MagicNumbers=_interopRequireDefault(require("./MagicNumbers")),_MimeTypesData=_interopRequireWildcard(require("./MimeTypesData"));function _getRequireWildcardCache(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(_getRequireWildcardCache=function(a){return a?c:b})(a)}function _interopRequireWildcard(a,b){if(!b&&a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var c=_getRequireWildcardCache(b);if(c&&c.has(a))return c.get(a);var d={},e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in a)if("default"!=f&&Object.prototype.hasOwnProperty.call(a,f)){var g=e?Object.getOwnPropertyDescriptor(a,f):null;g&&(g.get||g.set)?Object.defineProperty(d,f,g):d[f]=a[f]}return d.default=a,c&&c.set(a,d),d}function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function _classStaticPrivateMethodGet(a,b,c){return _classCheckPrivateStaticAccess(a,b),c}function _classCheckPrivateStaticAccess(a,b){if(a!==b)throw new TypeError("Private static access of wrong provenance")}class MimeTypes{static getMimeTypeFromExtension(a){const b=Array.from(_MimeTypesData.default).filter(b=>b.extensions.includes(a));return b.length?b[0].mimetype:_MimeTypesData.DEFAULT_MIME_TYPE}static getExtensionFromFileName(a){const b=a.split(".");return`.${b[b.length-1]}`}static getMimeTypeFromFileName(a){return MimeTypes.getContentType(a)}static getContentType(a){if(!_classStaticPrivateMethodGet(MimeTypes,MimeTypes,_isValidString).call(MimeTypes,a))throw new Error(_MimeTypesData.MIME_TYPES_ERROR_MESSAGES.FILE_NOT_EXISTS);const b=MimeTypes.getExtensionFromFileName(a);let c=null,d=null;try{c=_MagicNumbers.default.getMagicNumbersByFileExtension(b),d=_MagicNumbers.default.getMagicNumbersByFile(a)}catch(a){return a}const e=d?_MagicNumbers.default.getFileExtensionsByMagicNumbers(d):b;d||(d=c);const f=c===d;if(!e.length){const a=MimeTypes.getMimeTypeFromExtension(b);return a||_MimeTypesData.DEFAULT_MIME_TYPE}const g=e.includes(b);// FILE AND FILENAME DO NOT HAVE THE SAME MAGIC NUMBERS
// AND/OR FILE EXTENSION ( BREACH TRY? )
if(!f||!g)throw new Error(_MimeTypesData.MIME_TYPES_ERROR_MESSAGES.DIFFERENT_MAGIC_NUMBERS);return MimeTypes.getMimeTypeFromExtension(b)}}function _isValidString(a){return a&&"string"==typeof a&&""!==a.split(" ").join("")}var _default=MimeTypes;exports.default=_default;